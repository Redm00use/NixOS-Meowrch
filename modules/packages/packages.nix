{  config, pkgs, pkgs-unstable, lib, inputs, ... }:

{
  environment.systemPackages = with pkgs; [
    # ╔════════════════════════════════════════════════════════════════════════════╗
    # ║                             ТЕРМИНАЛ И ОБОЛОЧКА                         ║
    # ╚════════════════════════════════════════════════════════════════════════════╝
        kitty                      # GPU-терминал (быстрый, кастомизируемый)
        fish                       # Современная оболочка командной строки
        starship                   # Кроссплатформенный быстрый prompt для shell
        fastfetch                  # Быстрый вывод информации о системе

    # ╔════════════════════════════════════════════════════════════════════════════╗
    # ║                           ФАЙЛОВЫЕ МЕНЕДЖЕРЫ                            ║
    # ╚════════════════════════════════════════════════════════════════════════════╝
        nemo                       # Файловый менеджер Cinnamon (графический)
        ranger                     # Файловый менеджер для терминала
        zenity                     # Диалоговые окна GTK+ через shell (скрипты)

    # ╔════════════════════════════════════════════════════════════════════════════╗
    # ║                       WAYLAND / HYPRLAND УТИЛИТЫ                        ║
    # ╚════════════════════════════════════════════════════════════════════════════╝
        wayland                    # Библиотеки Wayland (основа протокола)
        xwayland                   # X11 сервер для Wayland (совместимость)
        wl-clipboard               # Копирование/вставка для Wayland (clipboard)
        cliphist                   # История буфера обмена для Wayland
        grim                       # Скриншоты для Wayland (grab image)
        slurp                      # Выделение области экрана для grim
        swww                       # Динамические обои для Wayland
        rofi-wayland               # Лаунчер приложений для Wayland (меню)
        waybar                     # Панель статуса для Wayland
        swaylock-effects           # Локскрин с эффектами для Wayland
        dunst                      # Демон уведомлений (notification daemon)
        pamixer                    # Управление громкостью через PulseAudio
        playerctl                  # Управление медиаплеерами через MPRIS
        kdePackages.polkit-kde-agent-1 # Агент polkit для KDE (авторизация)

    # ╔════════════════════════════════════════════════════════════════════════════╗
    # ║                              ВЕБ И СЕТЬ                                  ║
    # ╚════════════════════════════════════════════════════════════════════════════╝
        firefox                    # Веб-браузер Firefox
        wget                       # Загрузка файлов по HTTP/FTP
        curl                       # HTTP-клиент для командной строки
        networkmanagerapplet       # Апплет NetworkManager для панели

    # ╔════════════════════════════════════════════════════════════════════════════╗
    # ║                              РАЗРАБОТКА                                  ║
    # ╚════════════════════════════════════════════════════════════════════════════╝
        # --- Редакторы и инструменты Nix ---
        pkgs-unstable.zed-editor   # Редактор Zed из нестабильного канала
        nil                        # Язык спецификации Nix (форматирование)
        nixd                       # Язык-сервер для Nix (LSP)
        alejandra                  # Форматтер для Nix (используется в Zed)

        # --- Системы контроля версий ---
        git                        # Система контроля версий Git

        # --- Компиляторы и инструменты сборки ---
        gcc                        # Компилятор GCC (C/C++)
        clang                      # Компилятор Clang/LLVM (C/C++)
        nodejs                     # JavaScript runtime (Node.js)
        ripgrep                    # Быстрый поиск по файлам (rg)
        cmake                      # Система сборки CMake
        gnumake                    # GNU Make

        # --- Python 3.11 и пакеты ---
        python311                  # Python 3.11 интерпретатор
        python311Packages.pip      # pip для Python 3.11 (менеджер пакетов)

    # ╔════════════════════════════════════════════════════════════════════════════╗
    # ║                                ОБЩЕНИЕ                                   ║
    # ╚════════════════════════════════════════════════════════════════════════════╝
        discord                    # Discord клиент (чат, голос)
        pkgs-unstable.materialgram # Клиент Telegram Materialgram (unstable, Qt)

    # ╔════════════════════════════════════════════════════════════════════════════╗
    # ║                              МУЛЬТИМЕДИА                                 ║
    # ╚════════════════════════════════════════════════════════════════════════════╝
        spotify                    # Клиент Spotify (музыка)
        mpv                        # Видеоплеер MPV (универсальный)
        obs-studio                 # OBS Studio для записи/стриминга
        feh                        # Просмотр изображений (легковесный)
        ffmpeg                     # Мультимедийный фреймворк
        imagemagick                # Работа с изображениями

    # ╔════════════════════════════════════════════════════════════════════════════╗
    # ║                          ИГРЫ И ГРАФИКА                                  ║
    # ╚════════════════════════════════════════════════════════════════════════════╝
        # --- Оптимизация и overlay ---
        gamemode                   # Оптимизация производительности игр
        mangohud                   # Overlay с FPS и статистикой

        # --- Совместимость Windows ---
        wine                       # Запуск Windows-приложений
        winetricks                 # Скрипты для настройки Wine

        # --- Графические библиотеки и драйверы ---
        mesa                       # OpenGL реализация (Mesa)
        libGL                      # OpenGL библиотеки
        libva                      # Аппаратное ускорение видео VA-API
        libvdpau                   # Аппаратное ускорение видео VDPAU
        vulkan-loader              # Загрузчик Vulkan (runtime)
        vulkan-tools               # Инструменты Vulkan (отладка)
        vulkan-validation-layers   # Слои валидации Vulkan (debug)
        amdvlk                     # Vulkan-драйвер AMD (GPU)
        dxvk                       # DirectX 9/10/11 → Vulkan (DXVK)
        mesa-demos                 # Демо-программы для Mesa (тесты)

    # ╔════════════════════════════════════════════════════════════════════════════╗
    # ║                        СИСТЕМНЫЕ УТИЛИТЫ                                 ║
    # ╚════════════════════════════════════════════════════════════════════════════╝
        # --- Мониторинг системы ---
        htop                       # Интерактивный монитор процессов
        btop                       # Современный монитор ресурсов
        radeontop                  # Монитор AMD GPU

        # --- Управление дисками ---
        gnome-disk-utility         # Управление дисками GNOME
        parted                     # Разметка дисков (CLI)
        gparted                    # Разметка дисков (GUI)

        # --- Архивы ---
        unzip                      # Распаковка ZIP
        unrar                      # Распаковка RAR
        p7zip                      # 7-Zip архиватор
        kdePackages.ark            # Архиватор KDE

        # --- Bluetooth ---
        blueman                    # Менеджер Bluetooth (GUI)
        bluez                      # Стек Bluetooth
        bluez-tools                # Инструменты Bluetooth (CLI)

        # --- Сеть ---
        openssh                    # SSH клиент и сервер

        # --- Системная информация ---
        usbutils                   # USB утилиты (lsusb)
        pciutils                   # PCI утилиты (lspci)
        lshw                       # Информация об оборудовании
        dmidecode                  # DMI/SMBIOS информация
        tree                       # Отображение структуры каталогов
        file                       # Определение типа файлов
        which                      # Поиск команд в PATH

        # --- Система ---
        upower                     # Управление питанием
        xdg-utils                  # XDG утилиты
        gnome-keyring              # Хранилище ключей GNOME
        libsecret                  # Библиотека для секретов
        gcr                        # Управление сертификатами

        # --- Утилиты рабочего стола ---
        gnome-calculator           # Калькулятор GNOME
        qbittorrent                # Торрент-клиент

    # ╔════════════════════════════════════════════════════════════════════════════╗
    # ║                           ТЕМЫ И ИКОНКИ                                  ║
    # ╚════════════════════════════════════════════════════════════════════════════╝
        catppuccin-gtk             # GTK-тема Catppuccin
        gnome-themes-extra         # Дополнительные темы GNOME
        gsettings-desktop-schemas  # Схемы настроек рабочего стола
        catppuccin-qt5ct           # Catppuccin тема для Qt
  ];
}
